#config_version=5

mode:
  start_events:
    - cmd_start_mode_mask
  stop_events:
    - cmd_stop_mode_mask
  priority: 200

##################################################
# Events
##################################################

# v_mask_state
#
# round_1 - initial shot round
# round_2 - 2nd shot round
# round_3 - 3nd shot round
# mask_mania_ready
# mask_mania - mask mania
#
# v_mask_shot_state
# 1 = M
# 2 = MA
# 3 = MAS
# 4 = MASK
# 5 = Mask Building


event_player:

  right_ramp_hit{current_player.v_mask_state=="mask_mania_ready"}:
    # start mask mania

  right_ramp_hit{current_player.v_mask_state!="mask_mania_ready" and current_player.v_mask_state!="mask_mania" and current_player.v_mask_shot_state<4}:
    - cmd_mask_increase_round

  right_ramp_hit{current_player.v_mask_state!="mask_mania_ready" and current_player.v_mask_state!="mask_mania" and current_player.v_mask_shot_state>=4}:
    - cmd_mask_finish_round

  cmd_mask_increase_round:
    


  # Lights

  cmd_mask_refresh_lights:
    cmd_mask_clear_lights:
    cmd_mask_turn_on_lights:

##################################################
# Lights
##################################################

light_player:
  cmd_mask_clear_lights:
    fire_f: 0
    fire_i: 0
    fire_r: 0
    fire_e: 0

  cmd_mask_turn_on_lights{current_player.v_mask_shot_state==1}:
    fire_f: ff

  cmd_mask_turn_on_lights{current_player.v_mask_shot_state==2}:
    fire_f: ff
    fire_i: ff

  cmd_mask_turn_on_lights{current_player.v_mask_shot_state==3}:
    fire_f: ff
    fire_i: ff
    fire_r: ff

show_player:
  cmd_mask_clear_lights:
    med_flash:
      action: stop
      show_tokens:
        lights:
          - fire_f
          - fire_i
          - fire_r
          - fire_e
          - jackpot
          - lite_super_duper_jackpot

  cmd_mask_turn_on_lights{current_player.v_mask_shot_state==4}:
    med_flash:
      action: play
      show_tokens:
        lights:
          fire_f,
          fire_i,
          fire_r,
          fire_e,
          jackpot
